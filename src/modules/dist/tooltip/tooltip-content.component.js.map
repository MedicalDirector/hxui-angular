{"version":3,"file":"tooltip-content.component.js","sourceRoot":"","sources":["../../tooltip/tooltip-content.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component, Input, AfterViewInit, ElementRef, ChangeDetectorRef, ChangeDetectionStrategy} from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'hx-tooltip-content',\r\n   // changeDetection: ChangeDetectionStrategy.OnPush,\r\n    template: `\r\n        <div class=\"hx-tooltip is-{{ placement }}\"\r\n             [style.top]=\"top + 'px'\"\r\n             [style.left]=\"left + 'px'\"\r\n             [class.is-active]=\"active\"\r\n             role=\"tooltip\">\r\n            <div class=\"hx-tooltip-content\">\r\n                <ng-content></ng-content>\r\n                {{ content }}\r\n            </div> \r\n        </div>\r\n`\r\n})\r\nexport class TooltipContentComponent implements AfterViewInit {\r\n\r\n    @Input()\r\n    hostElement: HTMLElement;\r\n\r\n    @Input()\r\n    content: string;\r\n\r\n    @Input()\r\n    placement: 'top'|'bottom'|'left'|'right' = 'bottom';\r\n\r\n    @Input()\r\n    animation = true;\r\n\r\n    top: number = -100000;\r\n    left: number = -100000;\r\n    active = false;\r\n\r\n\r\n    constructor(private element: ElementRef,\r\n                private cdr: ChangeDetectorRef) {\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        this.show();\r\n        this.cdr.detectChanges();\r\n    }\r\n\r\n\r\n    show(): void {\r\n        if (!this.hostElement)\r\n            return;\r\n\r\n        const p = this.positionElements(this.hostElement, this.element.nativeElement.children[0], this.placement);\r\n        this.top = p.top;\r\n        this.left = p.left;\r\n        this.active = true;\r\n    }\r\n\r\n    hide(): void {\r\n        this.top = -100000;\r\n        this.left = -100000;\r\n        this.active = true;\r\n    }\r\n\r\n\r\n    private positionElements(hostEl: HTMLElement, targetEl: HTMLElement, positionStr: string, appendToBody: boolean = true): { top: number, left: number } {\r\n        const positionStrParts = positionStr.split('-');\r\n        const pos0 = positionStrParts[0];\r\n        const pos1 = positionStrParts[1] || 'center';\r\n        const hostElPos = appendToBody ? this.offset(hostEl) : this.position(hostEl);\r\n        const targetElWidth = targetEl.offsetWidth;\r\n        const targetElHeight = targetEl.offsetHeight;\r\n        const shiftWidth: any = {\r\n            center: function (): number {\r\n                return hostElPos.left + hostElPos.width / 2 - targetElWidth / 2;\r\n            },\r\n            left: function (): number {\r\n                return hostElPos.left;\r\n            },\r\n            right: function (): number {\r\n                return hostElPos.left + hostElPos.width;\r\n            }\r\n        };\r\n\r\n        const shiftHeight: any = {\r\n            center: function (): number {\r\n                return hostElPos.top + hostElPos.height / 2 - targetElHeight / 2;\r\n            },\r\n            top: function (): number {\r\n                return hostElPos.top;\r\n            },\r\n            bottom: function (): number {\r\n                return hostElPos.top + hostElPos.height;\r\n            }\r\n        };\r\n\r\n        let targetElPos: { top: number, left: number };\r\n        switch (pos0) {\r\n            case 'right':\r\n                targetElPos = {\r\n                    top: shiftHeight[pos1](),\r\n                    left: shiftWidth[pos0]()\r\n                };\r\n                break;\r\n\r\n            case 'left':\r\n                targetElPos = {\r\n                    top: shiftHeight[pos1](),\r\n                    left: hostElPos.left - targetElWidth\r\n                };\r\n                break;\r\n\r\n            case 'bottom':\r\n                targetElPos = {\r\n                    top: shiftHeight[pos0](),\r\n                    left: shiftWidth[pos1]()\r\n                };\r\n                break;\r\n\r\n            default:\r\n                targetElPos = {\r\n                    top: hostElPos.top - targetElHeight,\r\n                    left: shiftWidth[pos1]()\r\n                };\r\n                break;\r\n        }\r\n\r\n        return targetElPos;\r\n    }\r\n\r\n    private position(nativeEl: HTMLElement): { width: number, height: number, top: number, left: number } {\r\n        let offsetParentBCR = { top: 0, left: 0 };\r\n        const elBCR = this.offset(nativeEl);\r\n        const offsetParentEl = this.parentOffsetEl(nativeEl);\r\n        if (offsetParentEl !== window.document) {\r\n            offsetParentBCR = this.offset(offsetParentEl);\r\n            offsetParentBCR.top += offsetParentEl.clientTop - offsetParentEl.scrollTop;\r\n            offsetParentBCR.left += offsetParentEl.clientLeft - offsetParentEl.scrollLeft;\r\n        }\r\n\r\n        const boundingClientRect = nativeEl.getBoundingClientRect();\r\n        return {\r\n            width: boundingClientRect.width || nativeEl.offsetWidth,\r\n            height: boundingClientRect.height || nativeEl.offsetHeight,\r\n            top: elBCR.top - offsetParentBCR.top,\r\n            left: elBCR.left - offsetParentBCR.left\r\n        };\r\n    }\r\n\r\n    private offset(nativeEl: any): { width: number, height: number, top: number, left: number } {\r\n        const boundingClientRect = nativeEl.getBoundingClientRect();\r\n        return {\r\n            width: boundingClientRect.width || nativeEl.offsetWidth,\r\n            height: boundingClientRect.height || nativeEl.offsetHeight,\r\n            top: boundingClientRect.top + (window.pageYOffset || window.document.documentElement.scrollTop),\r\n            left: boundingClientRect.left + (window.pageXOffset || window.document.documentElement.scrollLeft)\r\n        };\r\n    }\r\n\r\n    private getStyle(nativeEl: HTMLElement, cssProp: string): string {\r\n        if ((nativeEl as any).currentStyle) // IE\r\n            return (nativeEl as any).currentStyle[cssProp];\r\n\r\n        if (window.getComputedStyle)\r\n            return (window.getComputedStyle(nativeEl) as any)[cssProp];\r\n\r\n        // finally try and get inline style\r\n        return (nativeEl.style as any)[cssProp];\r\n    }\r\n\r\n    private isStaticPositioned(nativeEl: HTMLElement): boolean {\r\n        return (this.getStyle(nativeEl, 'position') || 'static' ) === 'static';\r\n    }\r\n\r\n    private parentOffsetEl(nativeEl: HTMLElement): any {\r\n        let offsetParent: any = nativeEl.offsetParent || window.document;\r\n        while (offsetParent && offsetParent !== window.document && this.isStaticPositioned(offsetParent)) {\r\n            offsetParent = offsetParent.offsetParent;\r\n        }\r\n        return offsetParent || window.document;\r\n    }\r\n\r\n\r\n}\r\n"]}